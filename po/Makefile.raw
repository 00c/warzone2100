MAKERULES=../makerules
include $(MAKERULES)/configure.mk

.PHONY: all clean update-po po-files mo-files

all:
ifdef USE_GETTEXT
all: po-files mo-files
endif

PO_FILES= \
	cs.po \
	da.po \
	de.po \
	en_GB.po \
	es.po \
	eu.po \
	fi.po \
	fr.po \
	fy.po \
	ga.po \
	it.po \
	la.po \
	lt.po \
	lv.po \
	nb.po \
	nl.po \
	nn.po \
	pl.po \
	pt.po \
	pt_BR.po \
	ro.po \
	ru.po \
	sl.po \
	sv.po \
	sv_SE.po \
	tr.po \
	uz.po \
	zh_CN.po

MO_FILES=$(patsubst %.po,%.gmo, $(PO_FILES))

po-files: $(PO_FILES)
mo-files: $(MO_FILES)

update-po: clean all

$(PACKAGE).pot: POTFILES.in
	$(XGETTEXT) --default-domain=$(PACKAGE) --directory=.. --add-comments=TRANSLATORS: --keyword=_ --keyword=N_ --keyword=P_:1c,2 --keyword=NP_:1c,2 --files-from=$< --copyright-holder="Warzone Resurrection Project" --msgid-bugs-address="warzone-dev@gna.org"
	mv $(PACKAGE).po $@

%.po: $(PACKAGE).pot
	$(MSGMERGE) $@ $(PACKAGE).pot -o $@.new
	mv $@.new $@

%.gmo: %.po
	$(MSGFMT) -c -o $@ $<

clean:
	$(RMF) $(PACKAGE).pot
	$(RMF) $(MO_FILES)
