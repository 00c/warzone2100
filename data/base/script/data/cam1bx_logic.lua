-- Generated by wz2lua (implementation file)
version(0) --- version of the script API this script is written for
-- Starting Technology

scoutDroid = nil
grpPosCurrent = 0
count = 0

-- triggers

-- events

function startEvnt()
	createAlliance(enemy, enemy1)
	createAlliance(enemy, enemy2)
	-- NP technology startup
	count = 0
	while count < numtecE2 do
		completeResearch(tecE2[count], enemy)
		count = count + 1
	end
	-- place scout vehicle
	scoutDroid = addDroid(NPScout, coordsX[0], coordsY[0], enemy)
	-- now turn him round!
	grpPosCurrent = grpPosCurrent + 1
	if scoutDroid ~= nil then
		orderDroidLoc(scoutDroid, DORDER_MOVE, coordsX[grpPosCurrent], coordsY[grpPosCurrent])
	end
end
callbackEvent(startEvnt, CALL_GAMEINIT)

function wayEvnt()
	if scoutDroid ~= nil then
		if scoutDroid.order == DORDER_NONE then
			grpPosCurrent = grpPosCurrent + 1
			if grpPosCurrent > maxCoords then
				deactivateEvent(wayEvnt)
			else
				orderDroidLoc(scoutDroid, DORDER_MOVE, coordsX[grpPosCurrent], coordsY[grpPosCurrent])
			end
		end
	end
end

function scoutSeenEvnt()
	if scoutDroid ~= nil then
		if droidHasSeen(scoutDroid, player) then
			orderDroidLoc(scoutDroid, DORDER_MOVE, coordsX[1], coordsY[1])
			repeatingEvent(wayEvnt, 1.7)
			deactivateEvent(scoutSeenEvnt)
		end
	else
		deactivateEvent(scoutSeenEvnt)
	end
end
repeatingEvent(scoutSeenEvnt, 1.5)

function removeScoutEvnt()
	if scoutDroid ~= nil then
		vanishUnit(scoutDroid)
	end
	deactivateEvent(removeScoutEvnt)
end
conditionalEvent(removeScoutEvnt, "droidInArea(enemy, regionsX1[0], regionsY1[0], regionsX2[0], regionsY2[0])", 1.0)


---------- stubs ----------

if setEventTrigger == nil then setEventTrigger = function() print("stub: setEventTrigger"); return 0 end end
if addDroid == nil then addDroid = function() print("stub: addDroid"); return 0 end end
if completeResearch == nil then completeResearch = function() print("stub: completeResearch"); return 0 end end
if vanishUnit == nil then vanishUnit = function() print("stub: vanishUnit"); return 0 end end
if droidInArea == nil then droidInArea = function() print("stub: droidInArea"); return 0 end end
if orderDroidLoc == nil then orderDroidLoc = function() print("stub: orderDroidLoc"); return 0 end end
if createAlliance == nil then createAlliance = function() print("stub: createAlliance"); return 0 end end
if droidHasSeen == nil then droidHasSeen = function() print("stub: droidHasSeen"); return 0 end end
