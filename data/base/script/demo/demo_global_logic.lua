-- Generated by wz2lua (implementation file)
version(0) --- version of the script API this script is written for

-- starting tech

resP0 = Array(1)
resP1 = Array(1)
resP2 = Array(1)
resP3 = Array(1)
resP4 = Array(1)
resP5 = Array(1)
resP6 = Array(1)
resP7 = Array(1)

count = 0
playnum = 0

-- Triggers

-- Events

function startup()
	setFogColour(182, 225, 236)
	-- set fog on
	setBackgroundFog(true)
	setDepthFog(true)
	
	-- centre on P0 base
	centreViewPos(3392, 10944)
	
	randomiseSeed()
	playnum = 0
	while playnum < 8 do
		enableStructure(command, playnum)
		enableStructure(factory, playnum)
		enableStructure(wall, playnum)
		enableStructure(cornerWall, playnum)
		enableStructure(oilDerrick, playnum)
		enableStructure(powerGen, playnum)
		enableStructure(research, playnum)
		
		-- Common Starting Technologies
		count = 0
		while count < numtecCommon do
			completeResearch(tecCommon[count], playnum)
			count = count + 1
		end
		
		-- Common Starting Research
		count = 0
		while count < numResCommon do
			enableResearch(resCommon[count], playnum)
			count = count + 1
		end
		
		-- set structure limits
		setStructureLimits(factory, 5, playnum)
		setStructureLimits(powerGen, 5, playnum)
		setStructureLimits(research, 3, playnum)
		setStructureLimits(command, 1, playnum)
		
		-- setPowerLevel(1500,playnum);
		
		playnum = playnum + 1
	end
	
	-- player specific technology startups
	count = 0
	while count < numtecP0 do
		completeResearch(tecP0[count], 0)
		count = count + 1
	end
	count = 0
	while count < numtecP1 do
		completeResearch(tecP1[count], 1)
		count = count + 1
	end
	count = 0
	while count < numtecP2 do
		completeResearch(tecP2[count], 2)
		count = count + 1
	end
	count = 0
	while count < numtecP3 do
		completeResearch(tecP3[count], 3)
		count = count + 1
	end
	count = 0
	while count < numtecP4 do
		completeResearch(tecP4[count], 4)
		count = count + 1
	end
	count = 0
	while count < numtecP5 do
		completeResearch(tecP5[count], 5)
		count = count + 1
	end
	count = 0
	while count < numtecP6 do
		completeResearch(tecP6[count], 6)
		count = count + 1
	end
	count = 0
	while count < numtecP7 do
		completeResearch(tecP7[count], 7)
		count = count + 1
	end
	
	-- player specific research startups
	count = 0
	while count < numResP0 do
		enableResearch(resP0[count], 0)
		count = count + 1
	end
	count = 0
	while count < numResP1 do
		enableResearch(resP1[count], 1)
		count = count + 1
	end
	count = 0
	while count < numResP2 do
		enableResearch(resP2[count], 2)
		count = count + 1
	end
	count = 0
	while count < numResP3 do
		enableResearch(resP3[count], 3)
		count = count + 1
	end
	count = 0
	while count < numResP4 do
		enableResearch(resP4[count], 4)
		count = count + 1
	end
	count = 0
	while count < numResP5 do
		enableResearch(resP5[count], 5)
		count = count + 1
	end
	count = 0
	while count < numResP6 do
		enableResearch(resP6[count], 6)
		count = count + 1
	end
	count = 0
	while count < numResP7 do
		enableResearch(resP7[count], 7)
		count = count + 1
	end
end
callbackEvent(startup, CALL_GAMEINIT)

function weatherStart()
	if random(10) < 5 then
		setSnow(true)
		repeatingEvent(weatherStop, 10.0)
		deactivateEvent(weatherStart)
	end
end
repeatingEvent(weatherStart, 5.0)

function weatherStop()
	if random(10) < 4 then
		setSnow(false)
		repeatingEvent(weatherStart, 5.0)
		deactivateEvent(weatherStop)
	end
end


---------- stubs ----------

if setEventTrigger == nil then setEventTrigger = function() print("stub: setEventTrigger"); return 0 end end
if randomiseSeed == nil then randomiseSeed = function() print("stub: randomiseSeed"); return 0 end end
if completeResearch == nil then completeResearch = function() print("stub: completeResearch"); return 0 end end
if random == nil then random = function() print("stub: random"); return 0 end end
if enableResearch == nil then enableResearch = function() print("stub: enableResearch"); return 0 end end
if setSnow == nil then setSnow = function() print("stub: setSnow"); return 0 end end
if setFogColour == nil then setFogColour = function() print("stub: setFogColour"); return 0 end end
if enableStructure == nil then enableStructure = function() print("stub: enableStructure"); return 0 end end
if setStructureLimits == nil then setStructureLimits = function() print("stub: setStructureLimits"); return 0 end end
if centreViewPos == nil then centreViewPos = function() print("stub: centreViewPos"); return 0 end end
if setBackgroundFog == nil then setBackgroundFog = function() print("stub: setBackgroundFog"); return 0 end end
if setDepthFog == nil then setDepthFog = function() print("stub: setDepthFog"); return 0 end end
